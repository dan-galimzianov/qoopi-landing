(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&e(d)}).observe(document,{childList:!0,subtree:!0});function r(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(t){if(t.ep)return;t.ep=!0;const s=r(t);fetch(t.href,s)}})();function D(){const i=document.querySelectorAll('.form__item-input[data-mask="phone"]');function o(r){if(!r){console.warn("Элемент phone не найден");return}r.value||(r.value=""),r.addEventListener("focus",function(e){(!e.target.value||e.target.value==="+7")&&(e.target.value="+7")}),r.addEventListener("input",function(e){let t=e.target.value.replace(/\D/g,"");t.length>0&&t[0]!=="7"&&(t="7"+t);let s=t.match(/(\d{0,1})(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);e.target.value=s[2]?`+7 (${s[2]}${s[3]?`) ${s[3]}`:""}${s[4]?`-${s[4]}`:""}${s[5]?`-${s[5]}`:""}`:"+7"})}i.forEach(o)}const F=[{type:"image",src:"./src/assets/carousel/about-slider/left-half/photo1.webp"},{type:"video",src:"./src/assets/carousel/about-slider/left-half/video1.mp4",outlineSrc:"./src/assets/carousel/about-slider/outlines/outline1.webp"},{type:"image",src:"./src/assets/carousel/about-slider/left-half/photo2.webp"},{type:"video",src:"./src/assets/carousel/about-slider/left-half/video2.mp4",outlineSrc:"./src/assets/carousel/about-slider/outlines/outline2.webp"},{type:"image",src:"./src/assets/carousel/about-slider/left-half/photo3.webp"},{type:"video",src:"./src/assets/carousel/about-slider/left-half/video3.mp4",outlineSrc:"./src/assets/carousel/about-slider/outlines/outline3.webp"},{type:"image",src:"./src/assets/carousel/about-slider/left-half/photo4.webp"},{type:"video",src:"./src/assets/carousel/about-slider/left-half/video4.mp4",outlineSrc:"./src/assets/carousel/about-slider/outlines/outline4.webp"}],B=[{type:"video",src:"./src/assets/carousel/about-slider/right-half/video1.mp4",outlineSrc:"./src/assets/carousel/about-slider/outlines/outline1.webp"},{type:"image",src:"./src/assets/carousel/about-slider/right-half/photo1.webp"},{type:"video",src:"./src/assets/carousel/about-slider/right-half/video2.mp4",outlineSrc:"./src/assets/carousel/about-slider/outlines/outline8.webp"},{type:"image",src:"./src/assets/carousel/about-slider/right-half/photo2.webp"},{type:"video",src:"./src/assets/carousel/about-slider/right-half/video3.mp4",outlineSrc:"./src/assets/carousel/about-slider/outlines/outline3.webp"},{type:"image",src:"./src/assets/carousel/about-slider/right-half/photo3.webp"},{type:"video",src:"./src/assets/carousel/about-slider/right-half/video4.mp4",outlineSrc:"./src/assets/carousel/about-slider/outlines/outline7.webp"},{type:"image",src:"./src/assets/carousel/about-slider/right-half/photo4.webp"}],N=[{type:"image",src:"./src/assets/carousel/about-slider/left-half/photo1.webp"},{type:"video",src:"./src/assets/carousel/about-slider/right-half/video1.mp4",outlineSrc:"./src/assets/carousel/about-slider/outlines/outline1.webp"},{type:"video",src:"./src/assets/carousel/about-slider/left-half/video1.mp4",outlineSrc:"./src/assets/carousel/about-slider/outlines/outline1.webp"},{type:"image",src:"./src/assets/carousel/about-slider/right-half/photo1.webp"},{type:"image",src:"./src/assets/carousel/about-slider/left-half/photo2.webp"},{type:"video",src:"./src/assets/carousel/about-slider/right-half/video2.mp4",outlineSrc:"./src/assets/carousel/about-slider/outlines/outline1.webp"},{type:"video",src:"./src/assets/carousel/about-slider/left-half/video2.mp4",outlineSrc:"./src/assets/carousel/about-slider/outlines/outline1.webp"},{type:"image",src:"./src/assets/carousel/about-slider/right-half/photo2.webp"},{type:"image",src:"./src/assets/carousel/about-slider/left-half/photo3.webp"},{type:"video",src:"./src/assets/carousel/about-slider/right-half/video3.mp4",outlineSrc:"./src/assets/carousel/about-slider/outlines/outline1.webp"},{type:"video",src:"./src/assets/carousel/about-slider/left-half/video3.mp4",outlineSrc:"./src/assets/carousel/about-slider/outlines/outline1.webp"},{type:"image",src:"./src/assets/carousel/about-slider/right-half/photo3.webp"},{type:"image",src:"./src/assets/carousel/about-slider/left-half/photo4.webp"},{type:"video",src:"./src/assets/carousel/about-slider/right-half/video4.mp4",outlineSrc:"./src/assets/carousel/about-slider/outlines/outline1.webp"},{type:"video",src:"./src/assets/carousel/about-slider/left-half/video4.mp4",outlineSrc:"./src/assets/carousel/about-slider/outlines/outline1.webp"},{type:"image",src:"./src/assets/carousel/about-slider/right-half/photo4.webp"}],M=[{type:"image",src:"./src/assets/carousel/about-slider/left-half/photo1.webp"},{type:"video",src:"./src/assets/carousel/about-slider/left-half/video1.mp4",outlineSrc:"./src/assets/carousel/about-slider/outlines/outline1.webp"},{type:"image",src:"./src/assets/carousel/about-slider/left-half/photo2.webp"},{type:"video",src:"./src/assets/carousel/about-slider/left-half/video2.mp4",outlineSrc:"./src/assets/carousel/about-slider/outlines/outline2.webp"},{type:"image",src:"./src/assets/carousel/about-slider/left-half/photo3.webp"},{type:"video",src:"./src/assets/carousel/about-slider/left-half/video3.mp4",outlineSrc:"./src/assets/carousel/about-slider/outlines/outline3.webp"},{type:"image",src:"./src/assets/carousel/about-slider/left-half/photo4.webp"},{type:"video",src:"./src/assets/carousel/about-slider/left-half/video4.mp4",outlineSrc:"./src/assets/carousel/about-slider/outlines/outline4.webp"}],P=[{type:"image",src:"./src/assets/sellers/carousel/photo1.webp"},{type:"image",src:"./src/assets/sellers/carousel/photo2.webp"},{type:"image",src:"./src/assets/sellers/carousel/photo3.webp"},{type:"image",src:"./src/assets/sellers/carousel/photo4.webp"},{type:"image",src:"./src/assets/sellers/carousel/photo5.webp"},{type:"image",src:"./src/assets/sellers/carousel/photo6.webp"},{type:"image",src:"./src/assets/sellers/carousel/photo7.webp"},{type:"image",src:"./src/assets/sellers/carousel/photo8.webp"}],z=async i=>{const o=new Image;return o.crossOrigin="anonymous",o.src=i,o.complete||await new Promise(r=>{o.onload=()=>{r(o)},o.onerror=()=>{r(null)}}),o};function $(i){return Promise.all(i.map(o=>new Promise(async r=>{if(o.type==="video"){const e=document.createElement("video");e.src=o.src,e.muted=!0,e.loop=!0,e.autoplay=!0,e.playsInline=!0,e.crossOrigin="anonymous";const t={type:"video",media:e,height:0,width:0};if(o.outlineSrc){const s=await z(o.outlineSrc);t.outlineImg={type:"image",media:s,height:s.height,width:s.width}}e.readyState>3?(e.play(),t.height=e.videoHeight,t.width=e.videoWidth,r(t)):e.addEventListener("loadeddata",()=>{e.play(),t.height=e.videoHeight,t.width=e.videoWidth,r(t)})}else{const e=new Image;e.crossOrigin="anonymous",e.src=o.src,e.complete?r({type:"image",media:e,height:e.height,width:e.width}):e.onload=()=>{r({type:"image",media:e,height:e.height,width:e.width})}}})))}const W=(i,o,r,e,t,s,d=15)=>{const n=j(d,t,s);i.save(),i.beginPath(),i.moveTo(r+n.tl,e),i.lineTo(r+t-n.tr,e),i.quadraticCurveTo(r+t,e,r+t,e+n.tr),i.lineTo(r+t,e+s-n.br),i.quadraticCurveTo(r+t,e+s,r+t-n.br,e+s),i.lineTo(r+n.bl,e+s),i.quadraticCurveTo(r,e+s,r,e+s-n.bl),i.lineTo(r,e+n.tl),i.quadraticCurveTo(r,e,r+n.tl,e),i.closePath(),i.clip(),i.drawImage(o,r,e,t,s),i.restore()};function j(i,o,r){let e={tl:0,tr:0,br:0,bl:0};typeof i=="number"?e={tl:i,tr:i,br:i,bl:i}:e={tl:i.tl??0,tr:i.tr??0,br:i.br??0,bl:i.bl??0};const t=Math.min(1,o/(e.tl+e.tr),o/(e.bl+e.br),r/(e.tl+e.bl),r/(e.tr+e.br));return t<1&&(e.tl*=t,e.tr*=t,e.br*=t,e.bl*=t),e}const R=(i,o)=>{if(o.type==="video"){const e=i.canvas.width/o.width*o.height/window.devicePixelRatio;return{type:o.type,media:o.media,height:e,width:o.width/window.devicePixelRatio,outlineImg:o.outlineImg?R(i,o.outlineImg):void 0}}const r=i.canvas.width/o.width*o.height/window.devicePixelRatio;return{type:o.type,media:o.media,height:r,width:o.width/window.devicePixelRatio}},V=(i,o)=>{let r;return function(...e){clearTimeout(r),r=window.setTimeout(()=>i.apply(this,e),o)}},S=window.devicePixelRatio||1;function O(i){const r=i.getBoundingClientRect();i.width=r.width*S,i.height=r.height*S;const e=i.getContext("2d");return e.scale(S,S),e}const C=(i,o,r)=>{const e=document.getElementById(i);if(e.style.opacity="0",e.style.transition=`opacity ${r.fadeInDuration||500}ms ease`,!O(e))return;let s=null,d=[];(async()=>{d=await $(o)})().then(()=>{m()});const m=()=>{if(!d.length)return;s&&cancelAnimationFrame(s);const l=O(e);if(!l)return;let h=0;const c=r.speed/S,u=r.gap/S,p=e.width/S,f=60/S,v=d.map(y=>R(l,y)),w=()=>{l.clearRect(0,0,e.width,e.height);const y=v.reduce((a,_)=>a+_.height+u,0);let g=-h%y,E=0;for(;g<e.height+500;){const a=v[E%v.length];W(l,a.media,0,g,p,a.height,f),a.outlineImg&&l.drawImage(a.outlineImg.media,0,g,p,a.outlineImg.height),g+=a.height+u,E++}h+=c,h>=y&&(h=0),s=requestAnimationFrame(w)};s=requestAnimationFrame(w),setTimeout(()=>{e.style.opacity="1"},50)};return window.addEventListener("resize",V(m,100)),[m,()=>{s&&cancelAnimationFrame(s)}]},x=(i,o)=>{let r;return function(...e){clearTimeout(r),r=window.setTimeout(()=>i.apply(this,e),o)}},L=window.devicePixelRatio||1;function k(i){const r=i.getBoundingClientRect();i.width=r.width*L,i.height=r.height*L;const e=i.getContext("2d");return e.scale(L,L),e}function J(i,o){const r=i.canvas.height/L;let e=0;o.forEach(s=>{s.height>e&&(e=s.height)});const t=r/e;return o.map(s=>{const d=s.height*t,n=s.width*t;return{...s,displayHeight:d,displayWidth:n,scaleFactor:t}})}function K(i,o,r){const e=i.canvas.height/L,t=[];for(let s=0;s<o.length;s+=2){const d=o[s],n=o[s+1<o.length?s+1:0],m=Math.floor(s/2)%2===0,b=m?2/5:3/5,l=m?3/5:2/5,h=e*b,c=e*l,u=d.width/d.height*h,p=n.width/n.height*c,f=Math.max(u,p);t.push({type:"column",first:{...d,displayHeight:h,displayWidth:f,yOffset:0},second:{...n,displayHeight:c,displayWidth:f,yOffset:h+r/2},displayWidth:f,displayHeight:e,isEvenColumn:m})}return t}const H=(i,o,r)=>{const e=document.getElementById(i);if(e.style.opacity="0",e.style.transition=`opacity ${r.fadeInDuration||500}ms ease`,!k(e))return;let s=null,d=[];(async()=>{console.log("start loadMediaItems",i),d=await $(o),console.log("end loadMediaItems",i),m()})();const m=()=>{s&&cancelAnimationFrame(s);const l=k(e);if(!l)return;let h=0;const c=r.speed/L,u=r.gap/L,p=40/L,f=J(l,d),v=r.columnMode?K(l,f,u):f,w=()=>{l.clearRect(0,0,e.width,e.height);const y=v.reduce((a,_)=>a+_.displayWidth+u,0);let g=-h%y,E=0;for(;g<e.width+500;){const a=v[E%v.length];if(r.columnMode&&a.type==="column"){if(W(l,a.first.media,g,a.first.yOffset,a.first.displayWidth,a.first.displayHeight,p),a.first.outlineImg){const _=a.first.outlineImg.height*(a.first.displayHeight/a.first.height);l.drawImage(a.first.outlineImg.media,g,a.first.yOffset,a.first.displayWidth,_)}if(W(l,a.second.media,g,a.second.yOffset,a.second.displayWidth,a.second.displayHeight,p),a.second.outlineImg){const _=a.second.outlineImg.height*(a.second.displayHeight/a.second.height);l.drawImage(a.second.outlineImg.media,g,a.second.yOffset,a.second.displayWidth,_)}}else if(W(l,a.media,g,0,a.displayWidth,a.displayHeight,p),a.outlineImg){const _=a.outlineImg.height*(a.displayHeight/a.height);l.drawImage(a.outlineImg.media,g,0,a.displayWidth,_)}g+=a.displayWidth+u,E++}h+=c,h>=y&&(h=0),s=requestAnimationFrame(w)};s=requestAnimationFrame(w),setTimeout(()=>{e.style.opacity="1"},50)};return window.addEventListener("resize",x(m,100)),[m,()=>{e.style.opacity="0",s&&cancelAnimationFrame(s)}]},I={1:!1,3:!1,4:!1},q={1:[],3:[],4:[]},A={1:[],3:[],4:[]},T={1:()=>{if(I[1]){console.log("recalc 1"),q[1].forEach(d=>d());return}const[i,o]=C("about-carousel-1",F,{speed:2,gap:20}),[r,e]=C("about-carousel-2",B,{speed:3,gap:20}),[t,s]=H("about-carousel-mobile",N,{speed:1,gap:10,columnMode:!0});I[1]=!0,A[1].push(o,e,s),q[1].push(i,r,t)},3:()=>{if(I[3]){q[3].forEach(t=>t());return}const[i,o]=C("brands-carousel",M,{speed:3,gap:20}),[r,e]=H("brands-media-mobile-carousel",M,{speed:1,gap:10});I[3]=!0,A[3].push(o,e),q[3].push(i,r)},4:()=>{if(I[4]){q[4].forEach(t=>t());return}const[i,o]=C("sellers-carousel",P,{speed:3,gap:20}),[r,e]=H("sellers-carousel-mobile",P,{speed:1,gap:10});I[4]=!0,A[4].push(o,e),q[4].push(i,r)}};document.addEventListener("DOMContentLoaded",async()=>{D();const i=document.querySelectorAll(".hero-section__nav-link");let o="1";const r=c=>{const u=document.querySelector(".hero-section__content-container"),p=document.querySelector(`.hero-section__content[data-section-id="${c}"]`);u&&p&&u.style.setProperty("height",`${p.clientHeight}px`)},e=()=>{document.body.classList.remove("blot_1","blot_2","blot_3","blot_4")},t=c=>{if(!c)return;e(),i.forEach(p=>{p.classList.remove("hero-section__nav-link_active"),p.getAttribute("data-section-id")===c&&p.classList.add("hero-section__nav-link_active")});const u=document.querySelectorAll("[data-section-id]:not(.hero-section__nav-link):not(.menu-nav-link)");document.body.classList.add(`blot_${c}`),o=c,document.body.classList.remove("loading"),u.forEach(p=>{const f=p;p.getAttribute("data-section-id")===c?(f.style.setProperty("opacity","1"),f.style.setProperty("visibility","visible"),r(c)):(f.style.setProperty("opacity","0"),f.style.setProperty("visibility","hidden"))})};i.forEach(c=>{c.addEventListener("click",()=>{const u=c.getAttribute("data-section-id");u&&(A[o]&&A[o].forEach(p=>p()),o=u,T[o]&&(console.log("initCarouselBySectionId",o),T[o]()),setTimeout(()=>{t(u)},100))})});const s=i[0];s&&s.click();const d=document.querySelector(".header__menu-burger"),n=document.getElementById("closeBtn"),m=document.getElementById("menuOverlay");d==null||d.addEventListener("click",function(c){c.stopPropagation(),document.body.classList.add("menu-open")}),n==null||n.addEventListener("click",function(c){c.stopPropagation(),document.body.classList.remove("menu-open")}),document.addEventListener("click",function(c){document.body.classList.contains("menu-open")&&m&&d&&!m.contains(c.target)&&!d.contains(c.target)&&document.body.classList.remove("menu-open")}),document.querySelectorAll(".menu-nav-link").forEach(c=>{c.addEventListener("click",u=>{u.preventDefault();const f=u.currentTarget.getAttribute("data-section-id");document.body.classList.remove("menu-open"),f&&setTimeout(()=>{t(f);const v=document.querySelector(`.hero-section__nav-link[data-section-id="${f}"]`);v&&v.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})},300)})}),window.addEventListener("resize",()=>{r(o)}),r(o);const l=document.querySelectorAll(".textarea-auto-resize");l==null||l.forEach(c=>{c.addEventListener("input",()=>{c.style.height="auto",c.style.height=c.scrollHeight+"px"})}),document.querySelectorAll(".scale-element").forEach(c=>{const u=c.getAttribute("data-scale"),p=window.innerWidth,f=c.clientWidth,w=p*Number(u)/f;u&&(c.style.transform=`scale(${w})`),window.addEventListener("resize",()=>{const y=window.innerWidth,g=c.clientWidth,a=y*Number(u)/g;u&&(c.style.transform=`scale(${a})`)})})});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".modal").forEach(o=>{const r=o.getAttribute("data-modal-id");document.querySelectorAll(`button[data-modal-id="${r}"]`).forEach(d=>{d.addEventListener("click",()=>{document.body.classList.remove("menu-open"),o.classList.add("modal_active")})});const t=o.querySelector(".modal__overlay"),s=o.querySelector(".modal__close-button");t==null||t.addEventListener("click",()=>{o.classList.remove("modal_active")}),s==null||s.addEventListener("click",()=>{o.classList.remove("modal_active")})})});document.addEventListener("DOMContentLoaded",function(){const i=document.querySelectorAll(".form"),o=document.getElementById("successModal");document.getElementById("successModalClose").addEventListener("click",function(){o.classList.remove("active")}),i.forEach(e=>{const t=e.closest(".modal");e.addEventListener("submit",function(s){s.preventDefault();const d=e.querySelectorAll(".form__item"),n={},m={};if(Array.from(d).forEach(l=>{const h=l.querySelector(".form__item-input"),c=l.getAttribute("data-form-validation-required")==="true",u=h.getAttribute("name"),p=h.type==="checkbox";c&&h.value.trim()===""&&(n[u]="Поле обязательно для заполнения"),c&&p&&(h.checked||(n[u]="Поле обязательно для заполнения")),l.getAttribute("data-form-validation-is-email")==="true"&&(h.value.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)||(n[u]="Неверный формат электронной почты")),l.getAttribute("data-form-validation-is-phone")==="true"&&(/^\+7 \(\d{3}\) \d{3}-\d{2}-\d{2}$/.test(h.value)||(n[u]="Неверный формат телефона"));const w=l.getAttribute("data-form-validation-is-multiselect")==="true";m[u]=w?h.value.split(",").filter(Boolean):h.value,p&&(m[u]=h.checked);const y=l.querySelector(".form__item-error")||document.createElement("div");n[u]?(l.classList.add("form__item_error"),p||(y.classList.add("form__item-error"),y.textContent=n[u],l.appendChild(y))):(l.classList.remove("form__item_error"),y==null||y.remove())}),Object.keys(n).length===0){const l=e.getAttribute("data-server-url");fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}).then(h=>h.json()).then(()=>{e.reset(),o.classList.add("active"),t.classList.remove("modal_active")}).catch(h=>{console.error("Ошибка:",h)})}})})});document.addEventListener("DOMContentLoaded",function(){const i=document.querySelectorAll(".multiselect");i.forEach(function(t){o(t)});function o(t){const s=t.querySelector(".multiselect__header"),d=t.querySelector(".multiselect__arrow"),n=t.querySelector(".multiselect__dropdown"),m=t.querySelectorAll(".multiselect__option");e(t),s.addEventListener("click",function(b){i.forEach(function(l){l!==t&&(l.querySelector(".multiselect__arrow").classList.remove("multiselect__arrow--up"),l.querySelector(".multiselect__dropdown").classList.remove("multiselect__dropdown--visible"))}),d.classList.toggle("multiselect__arrow--up"),n.classList.toggle("multiselect__dropdown--visible"),b.stopPropagation()}),m.forEach(function(b){b.addEventListener("click",function(l){b.classList.toggle("multiselect__option--selected");const h=b.classList.contains("multiselect__option--selected");b.setAttribute("aria-selected",h),r(t),e(t),l.stopPropagation()})}),r(t)}function r(t){const s=t.querySelector(".multiselect__title"),d=t.querySelectorAll(".multiselect__option--selected");if(d.length===0)s.classList.add("multiselect__title--empty"),s.textContent="Выберите";else{s.classList.remove("multiselect__title--empty");const n=Array.from(d).map(m=>m.querySelector(".multiselect__text").textContent);n.length<=2?s.textContent=n.join(", "):s.textContent=`Выбрано ${n.length} категории`}}function e(t){const s=t.querySelector(".multiselect__input");s.value="",t.querySelectorAll(".multiselect__option--selected").forEach(n=>{const m=n.dataset.value;s.value+=`${m},`})}document.addEventListener("click",function(t){i.forEach(function(s){s.querySelector(".multiselect__header");const d=s.querySelector(".multiselect__dropdown"),n=s.querySelector(".multiselect__arrow");s.contains(t.target)||(n.classList.remove("multiselect__arrow--up"),d.classList.remove("multiselect__dropdown--visible"))})})});
